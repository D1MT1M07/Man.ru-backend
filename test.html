<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ Man.ru</title>
    <style>
        body { font-family: Arial; padding: 20px; line-height: 1.6; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        code { background: #f4f4f4; padding: 2px 5px; border-radius: 3px; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ man.ru</h1>
    
    <div class="test-section">
        <h2>1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ DataManager</h2>
        <p id="test1" class="error">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        <button onclick="testDataManager()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
    </div>

    <div class="test-section">
        <h2>2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ Renderer</h2>
        <p id="test2" class="error">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        <button onclick="testRenderer()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
    </div>

    <div class="test-section">
        <h2>3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ Modal</h2>
        <p id="test3" class="error">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        <button onclick="testModal()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
    </div>

    <div class="test-section">
        <h2>4Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏</h2>
        <p id="test4"></p>
        <button onclick="testAddArticle()">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</button>
    </div>

    <div class="test-section">
        <h2>5Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–æ—Ä—É–º-–ø–æ—Å—Ç–∞</h2>
        <p id="test5"></p>
        <button onclick="testAddPost()">–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç</button>
    </div>

    <div class="test-section">
        <h2>localStorage –¥–∞–Ω–Ω—ã–µ:</h2>
        <pre id="storageData" style="background: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto;"></pre>
        <button onclick="showStorage()">–ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        <button onclick="clearStorage()">–û—á–∏—Å—Ç–∏—Ç—å localStorage</button>
    </div>

    <script>
        function testDataManager() {
            const dm = new DataManager();
            const articles = dm.getArticles();
            const posts = dm.getForumPosts();
            const test1 = document.getElementById('test1');
            
            if (articles.length > 0 && posts.length > 0) {
                test1.className = 'success';
                test1.innerHTML = `‚úÖ DataManager —Ä–∞–±–æ—Ç–∞–µ—Ç! –°—Ç–∞—Ç–µ–π: ${articles.length}, –ü–æ—Å—Ç–æ–≤: ${posts.length}`;
            } else {
                test1.className = 'error';
                test1.innerHTML = '‚ùå DataManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω';
            }
        }

        function testRenderer() {
            const test2 = document.getElementById('test2');
            
            try {
                const categoryName = Renderer.getCategoryName('fitness');
                if (categoryName === '–§–∏—Ç–Ω–µ—Å') {
                    test2.className = 'success';
                    test2.innerHTML = `‚úÖ Renderer —Ä–∞–±–æ—Ç–∞–µ—Ç! –¢–µ—Å—Ç –º–∞–ø–ø–∏–Ω–≥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: fitness ‚Üí ${categoryName}`;
                } else {
                    test2.className = 'error';
                    test2.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞: –ø–æ–ª—É—á–µ–Ω–æ "${categoryName}"`;
                }
            } catch(e) {
                test2.className = 'error';
                test2.innerHTML = `‚ùå –û—à–∏–±–∫–∞: ${e.message}`;
            }
        }

        function testModal() {
            const test3 = document.getElementById('test3');
            
            try {
                Modal.open('addArticleModal');
                const modal = document.getElementById('addArticleModal');
                
                if (modal && modal.classList.contains('active')) {
                    test3.className = 'success';
                    test3.innerHTML = `‚úÖ Modal —Ä–∞–±–æ—Ç–∞–µ—Ç! –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è`;
                    Modal.close('addArticleModal');
                } else {
                    test3.className = 'error';
                    test3.innerHTML = '‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è';
                }
            } catch(e) {
                test3.className = 'error';
                test3.innerHTML = `‚ùå –û—à–∏–±–∫–∞: ${e.message}`;
            }
        }

        function testAddArticle() {
            const dm = new DataManager();
            const beforeCount = dm.getArticles().length;
            
            const article = {
                title: '–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è ' + Date.now(),
                category: 'tech',
                description: '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏',
                author: '–¢–µ—Å—Ç–æ–≤—ã–π –∞–≤—Ç–æ—Ä'
            };
            
            dm.addArticle(article);
            const afterCount = dm.getArticles().length;
            const test4 = document.getElementById('test4');
            
            if (afterCount > beforeCount) {
                test4.className = 'success';
                test4.innerHTML = `‚úÖ –°—Ç–∞—Ç—å—è –¥–æ–±–∞–≤–ª–µ–Ω–∞! –í—Å–µ–≥–æ —Å—Ç–∞—Ç–µ–π: ${afterCount}`;
            } else {
                test4.className = 'error';
                test4.innerHTML = '‚ùå –°—Ç–∞—Ç—å—è –Ω–µ –¥–æ–±–∞–≤–∏–ª–∞—Å—å';
            }
        }

        function testAddPost() {
            const dm = new DataManager();
            const beforeCount = dm.getForumPosts().length;
            
            const post = {
                title: '–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç ' + Date.now(),
                category: 'career',
                message: '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä—É–º-–ø–æ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏',
                author: '–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'
            };
            
            dm.addForumPost(post);
            const afterCount = dm.getForumPosts().length;
            const test5 = document.getElementById('test5');
            
            if (afterCount > beforeCount) {
                test5.className = 'success';
                test5.innerHTML = `‚úÖ –ü–æ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω! –í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤: ${afterCount}`;
            } else {
                test5.className = 'error';
                test5.innerHTML = '‚ùå –ü–æ—Å—Ç –Ω–µ –¥–æ–±–∞–≤–∏–ª—Å—è';
            }
        }

        function showStorage() {
            const articles = JSON.parse(localStorage.getItem('man_ru_articles') || '[]');
            const posts = JSON.parse(localStorage.getItem('man_ru_forum_posts') || '[]');
            
            const data = {
                articles_count: articles.length,
                posts_count: posts.length,
                articles: articles.slice(0, 2),
                posts: posts.slice(0, 2)
            };
            
            document.getElementById('storageData').textContent = JSON.stringify(data, null, 2);
        }

        function clearStorage() {
            localStorage.removeItem('man_ru_articles');
            localStorage.removeItem('man_ru_forum_posts');
            document.getElementById('storageData').textContent = 'localStorage –æ—á–∏—â–µ–Ω';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            testDataManager();
            testRenderer();
            testModal();
        });
    </script>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç main.ru -->
    <script src="script.js"></script>
</body>
</html>
